<%= form_for [:admin, @user], :html => {:class => "form-horizontal", onsubmit: "return users.check();"} do |u| %>
<% if @user.errors.any? %>
<div class="alert alert-danger" role="alert">
  <strong>保存失败</strong>
  <ul>
    <% @user.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
    <% end %>
  </ul>
</div>
<% end %>

<div class="form-group">
  <%= u.label :tel, "手机号", :class => "col-sm-2 control-label"  %>
  <div class="col-sm-6">
    <label class="form-control-static"><%=u.object.tel%></label>
  </div>
</div>
<div class="form-group">
  <%= u.label :role, "角色", class: "col-sm-2 control-label"  %>
  <div class="col-sm-3">
    <%= u.select :role, options_for_select({"顾客" => "customer", "供应商" => "supplier", "卖家" => "seller", "管理员" => "admin"}, u.object.role), {}, {class: "form-control", required: true, onchange: "users.changeRole()"} %>
  </div>
</div>
<div class="form-group" id="group">
  <%= u.label :group_id, "所属店铺", :class => "col-sm-2 control-label"  %>
  <div class="col-sm-3">
    <%= u.select :group_id, options_from_collection_for_select(@groups, :id, :name, u.object.group_id), {include_blank: true}, {class: "form-control"} %>
  </div>
</div>
<div class="form-group" id="supplier">
  <%= u.label :supplier_id, "所属供应商", :class => "col-sm-2 control-label"  %>
  <div class="col-sm-3">
    <%= u.select :supplier_id, options_from_collection_for_select(@suppliers, :id, :name, u.object.supplier_id), {include_blank: true}, {class: "form-control"} %>
  </div>
</div>
<div class="form-group">
  <%= u.label :status, "状态", :class => "col-sm-2 control-label"  %>
  <div class="col-sm-3">
    <%= u.select :status, options_for_select([["启用", "active"], ["禁用", "disabled"]], u.object.status), {}, {class: "form-control", required: true} %>
  </div>
</div>
<% if @user.access_locked? %>
<div class="form-group">
  <label class="col-sm-2">&nbsp;</label>
  <p class="form-control-static">* 该用户被锁定，暂时无法登录。
    <%= link_to "解锁", "/admin/users/#{u.object.id}/unlock", method: "PUT", class: "" %>
  </p>

</div>
<% end %>
<div class="form-group">
  <div class="col-sm-offset-2 col-sm-10">
    <%= submit_tag "确认",  :class => "btn btn-primary" %>
    <%= link_to "取消", admin_users_path, :class => "btn btn-default" %>
  </div>
</div>

<% end %>
