<h1 class="page-header">订单管理</h1>
<div>
  <a href="" class="btn btn-primary pull-right">
    <span class="glyphicon glyphicon-refresh"></span> 刷新
  </a>
  <form action="<%= admin_orders_path %>" method="get" class="form-inline">
    <div class="form-group">
      <%= text_field_tag :order_id_or_tel, @order_id_or_tel, class: "form-control", placeholder: "订单号/手机号" %>
    </div>
    <%= submit_tag "搜索", class: "btn btn-primary"%>
    <button type="reset" class="btn btn-default" >重置</button>
  </form>
</div>
<div>
  <%= link_to "等待处理", "#{admin_orders_path}?type=wait_shipping", class: "#{'highlight' if @type.eql?('wait_shipping')} filter-link" %>
  <%= link_to "处理完成", "#{admin_orders_path}?type=finished", class: "#{'highlight' if @type.eql?('finished')} filter-link" %>
  <%= link_to "已取消", "#{admin_orders_path}?type=canceled", class: "#{'highlight' if @type.eql?('canceled')} filter-link" %>
</div>
<table class="table">
  <thead>
    <tr>
      <td>订单号</td>
      <td>用户</td>
      <td class="number">总价</td>
      <td>状态</td>
      <td>类型</td>
      <td>创建时间</td>
      <td>操作</td>
    </tr>
  </thead>
  <tbody>
    <% @orders.each_with_index do |order, index| %>
    <tr>
      <td><%= order.order_id  %></td>
      <td><%= order.customer.tel  %></td>
      <td class="number"><%= number_to_currency order.subtotal, locale: :'zh-CN', precision: 2  %></td>
      <td><%= order_status order %></td>
      <td><%= type_name order %></td>
      <td><%= display_datetime order.created_at %></td>
      <td>
        <%= link_to admin_order_path(order) do %>
          <span class="glyphicon glyphicon-eye-open"></span></button>
        <% end %>
      </td>
    </tr>
    <% end %>
  </tbody>
  <tfooter>
    <tr>
      <td colspan="6">
        <%= will_paginate @orders, page_links: false %>
      </td>
    </tr>
  </tfooter>
</table>
