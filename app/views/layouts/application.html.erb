<!DOCTYPE html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <title>拾惠社</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,user-scalable=no">
    <link href="<%=image_url('favicon.ico')%>" rel="icon">
    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
    <%= csrf_meta_tags %>
  </head>
  <body ng-app="webStore" ng-class="{'disable-scroll': showMenu || showSpecification}">

    <header>
      <div class="navbar navbar-default" role="navigation">
        <div class="navbar-header" style="height:50px">

          <section class="inherit-height pull-left">
            <button class="btn pull-left icon table-center inherit-height" ng-click="showMenu=true">
              <i class="glyphicon glyphicon-menu-hamburger"></i>
            </button>
          </section>

          <section class="navbar-brand pull-left inherit-height">
            <a class="" href="/">拾惠社</a>
          </section>

          <section class="inherit-height search-container ng-cloak" ng-show="showSearch" ng-cloak>
            <form ng-submit="search()" class="inherit-height table-center-wrap">
              <button class="btn icon inherit-height highlight-icon" type="submit"><i class="glyphicon glyphicon-search"></i></button>
              <button class="btn icon inherit-height" style="right:0" ng-click="showSearch=false"><i class="glyphicon glyphicon-remove"></i></button>
              <input  type="search" class="search table-center inherit-height pull-left" placeholder="搜索商铺" focus-me="focusSearch" ng-model="searchText">
            </form>
          </section>

          <section class="pull-right inherit-height table-center-wrap" ng-hide="showSearch">
            <a type="button" class="icon btn btn-lg table-center" ng-click="showSearch=true;focusSearch=true">
              <i class="glyphicon glyphicon-search"></i>
            </a>
            <a type="button" class="icon btn btn-lg table-center" ng-href="/carts">
              <i class="glyphicon glyphicon-shopping-cart"></i>
            </a>
          </section>

        </div>
      </div>
    </header>

    <nav class="navbar-side ng-cloak animate-hide animate-hide-left" ng-show="showMenu" ng-cloak>
      <header>
        <% if user_signed_in? %>
        <a  class="inherit-height pull-left" ng-href="/me"  ng-click="showMenu=false">
          <%= image_tag "user.png" %>
          <p class="inherit-height nav-header-link-text"><span class="table-center inherit-height"><%= current_user.tel %></span></p>
        </a>
        <% else %>
        <a href="/users/sign_in" target="_self" class="inherit-height pull-left">
          <%= image_tag "user.png" %>
          <p class="inherit-height nav-header-link-text"><span class="table-center inherit-height">登录</span></p>
        </a>
        <% end %>
        <button type="button" class="icon btn btn-lg pull-right inherit-height" ng-click="showMenu=false">
          <i class="glyphicon glyphicon-remove"></i>
        </button>
      </header>

      <section class="nav-section">
        <ul class="nav">
          <% if user_signed_in? %>
          <li><a ng-href="/me" ng-click="showMenu=false" class="icon-link-left"><i class="glyphicon glyphicon-home"></i>我的拾惠社</a></li>
          <% end %>
          <li><a ng-href="/orders/all" ng-click="showMenu=false" class="icon-link-left"><i class="glyphicon glyphicon-list-alt"></i>订单</a></li>
          <li><a ng-href="/carts" ng-click="showMenu=false" class="icon-link-left"><i class="glyphicon glyphicon-shopping-cart"></i>购物车</a></li>
          <li><a ng-href="/about" ng-click="showMenu=false" class="icon-link-left">关于</a></li>
        </ul>
      </section>
    </nav>
    <div class="block-layer ng-cloak" ng-show="showMenu || showSpecs" ng-cloak ng-click="showMenu=false; showSpecs=false"></div>

    <div class="container" style="background-color: #fff;min-height:200px;" ng-view save-my-content  autoscroll="true">
      <%= yield %>
    </div>

    <%= image_tag "/images/spinner.gif", style: "position:fixed;left:-1000px;"%>
    <div  class="ng-cloak" ng-show="layout.loading" ng-cloak><!-- Loading animation  -->
      <div class="block-layer block-layer-light"></div>
      <div class="spinner-container img-circle">
        <div class="spinner"></div>
      </div>
      <!-- <svg class="spinner" viewBox="0 0 66 66" > -->
      <!--   <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle> -->
      <!-- </svg> -->
    </div>

    <footer>
      <div class="container">
        <p>© 拾惠社 2015</p>
        <p>京ICP备15036211号</p>
      </div>
    </footer>

     <%= javascript_include_tag "http://upcdn.b0.upaiyun.com/libs/jquery/jquery-2.0.3.min.js" %>
     <%= javascript_include_tag "http://cdn.staticfile.org/angular.js/1.3.0-beta.13/angular.min.js" %>
     <%= javascript_include_tag "http://cdn.staticfile.org/angular.js/1.3.0-beta.13/angular-animate.min.js" %>
     <%= javascript_include_tag "http://cdn.staticfile.org/angular.js/1.3.0-beta.13/angular-route.min.js" %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>

</body>
</html>
